##### 常用判断方法

```objective-c
//获取自己的id
[IMPUserModel activeInstance].exeofidString
//判断语言类型
[[IMPI18N userLanguage] isEqualToString:@"en"]
//根据当前主题设置颜色
 regularLabelBg.backgroundColor = [UIColor qmui_colorWithThemeProvider:^UIColor * _Nonnull(__kindof QMUIThemeManager * _Nonnull manager, __kindof NSObject<NSCopying> * _Nullable identifier, __kindof NSObject * _Nullable theme) {
        if ([identifier isEqualToString:QDThemeIdentifierDark]) {
            return [UIColor colorFromHexCode:@"#242527"];
        }
        return [UIColor colorFromHexCode:@"#F5F5F5"];
 }];
// 判断当前主题
   if ([QMUIThemeManagerCenter.defaultThemeManager.currentThemeIdentifier isEqual:QDThemeIdentifierDark])
//国际化宏定义
IMPLocalizedString(@"")
//头像设置
 PhotoImageDataDAL *dal = [[PhotoImageDataDAL alloc] initWithUserID:uid];
 if (dal.url) {
     [avatar sd_setImageWithURL:[NSURL URLWithString:dal.url] forState:UIControlStateNormal placeholderImage:[UIImage imageNamed:@"Personal Large"]];
 }
 else {
     [avatar setImage:dal.img forState:UIControlStateNormal];
 }
//获取群成员
_session.channel.members
     
```



##### 云+沟通缺少已读未读状态的socket

- iOS_api_channel_mesage

- api_offline_channel_message

  

##### 仿微信长按消息气泡弹窗

https://github.com/Rex-xingjl/PopMenu



#####stepslider

https://github.com/spromicky/StepSlider



#####批量转发子消息格式

iOS端发送前打印

```json
//逐条转发子消息格式
[
  {
    "tmpId": "1656299342968",
    "type": "text\/plain",
    "mentions": {
      
    },
    "text": "测试循环发送消息6"
  },
  {
    "status": 3,
    "category": "Plain Text",
    "media": "\/regular-file\/1_新建文本文档 (2)(18).txt",
    "size": 56,
    "type": "file\/regular-file",
    "tmpId": "1656299343434",
    "name": "1_新建文本文档 (2).txt"
  }
]

//合并转发子消息
[
  {
    "mentions": {
      
    },
    "sendTime": "1655978813.596000",
    "text": "测试循环发送消息6",
    "sendUserId": "4627095",
    "sendUserName": "杨彪",
    "tmpId": "1656299465733",
    "type": "text\/plain"
  },
  {
    "status": 3,
    "category": "Plain Text",
    "sendUserName": "杨彪",
    "media": "\/regular-file\/1_新建文本文档 (2)(19).txt",
    "size": 56,
    "sendTime": "1655966531.879000",
    "type": "file\/regular-file",
    "sendUserId": "4627095",
    "tmpId": "1656299466219",
    "name": "1_新建文本文档 (2).txt"
  }
]
```



##### 批量转发功能

必须：

- 消息选择UI 逻辑（1天）
- 消息类型判断（哪些类型支持多选和转发待定、暂定0.5天）
- 逐条转发接口对接、接入（3天）
- 合并转发消息类型增加、数据格式确定（2天）
- 合并转发消息展示页（3天）
- 暗黑、大字体适配（1天）
- 合并转发消息子消息id处理方式（服务端只做转发，是否有问题需要进一步验证）
- 消息时间分段 如何处理

非必须：

- 长按消息弹窗样式改版 （2天）
- 转发时添加留言（需服务端支持，1天）
- 批量转发多人（需服务端支持，1天）
- 转发选择界面、弹窗样式改版（可能涉及逻辑，暂定2天）



#####PC端需要解决和优化的问题

1. 掉线问题：看一下本身有没有回调，没有就发心跳

2. windows签名问题

3. 快速安装+自定义安装

4. 登录后加载时间慢、有些界面细节不美观、移动版功能对齐、截屏功能不够，另外要考虑内嵌个浏览器，未来和iGIX的一个PC Web界面能融合




